{% extends 'admin/homeadmin.html.twig' %}

{% block title %}H√©bergement - Liste{% endblock %}

{% block Content %}
<div style="overflow-x: auto;">
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nom</th>
                <th>Type</th>
                <th>Adresse</th>
                <th>Capacit√©</th>
                <th>Prix</th>
                <th>Disponibilit√©</th>
                <th>Description</th>
                <th>Image</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
        {% for hebergement in pagination %}
            <tr>
                <td>{{ hebergement.id }}</td>
                <td>{{ hebergement.nomh }}</td>
                <td>{{ hebergement.typeh }}</td>
                <td>{{ hebergement.adressh }}</td>
                <td>{{ hebergement.capaciteh }}</td>
                <td>{{ hebergement.prixh }}</td>
                <td>{{ hebergement.disponibleh }}</td>
                <td>{{ hebergement.descriptionh }}</td>
                <td>
                    {% if hebergement.imageh %}
                        <img src="{{ asset('img/' ~ hebergement.imageh) }}" alt="{{ hebergement.nomh }}" width="80" onerror="this.onerror=null; this.src='/img/placeholder.jpg';">
                    {% else %}
                        <em>Aucun visuel</em>
                    {% endif %}
                </td>
                <td class="actions-column">
                    <div class="action-buttons">
                        <a href="{{ path('app_hebergement_show', {'id_hebergement': hebergement.id}) }}" class="btn btn-details">D√©tails</a>
                        <a href="{{ path('app_hebergement_edit', {'id_hebergement': hebergement.id}) }}" class="btn btn-edit">Modifier</a>
                        <form id="delete-form-{{ hebergement.id }}" method="post" action="{{ path('app_hebergement_delete', {'id_hebergement': hebergement.id}) }}" style="display:inline;">
                            <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ hebergement.id) }}">
                            <button type="submit" class="btn btn-delete" onclick="return confirm('Voulez-vous vraiment supprimer cet h√©bergement ?');">Supprimer</button>
                        </form>
                        <a href="{{ path('app_reservation_hebergement_new', {'id_hebergement': hebergement.id}) }}" class="btn btn-reserver">R√©server</a>
                    </div>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="10" class="text-center">Aucun h√©bergement trouv√©.</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {# Pagination Controls #}
    <div class="pagination-wrapper">
        {{ knp_pagination_render(pagination) }}
    </div>

    {# Create Button #}
    <div class="create-button">
        <a href="{{ path('app_hebergement_new') }}" class="create-btn">
            ‚ûï Cr√©er un nouvel h√©bergement
        </a>
    </div>

    {# Voir toutes les r√©servations ‚Äî petit lien en bas √† droite #}
    <div style="text-align: right; margin-top: 10px; margin-right: 10px;">
        <a href="{{ path('app_reservation_hebergement_index') }}" style="font-size: 13px; color: #06BBCC; text-decoration: none;">
            üìã Voir toutes les r√©servations
        </a>
    </div>
</div>

<style>
    .table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 30px;
    }

    .table th, .table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid #dee2e6;
    }

    .table th {
        background-color: #f8f9fa;
    }

    .actions-column {
        min-width: 300px;
    }

    .action-buttons {
        display: flex;
        flex-direction: row;
        flex-wrap: nowrap;
        gap: 6px;
        justify-content: flex-start;
        align-items: center;
    }

    .btn {
        padding: 4px 8px;
        font-size: 13px;
        border-radius: 4px;
        text-align: center;
        border: none;
        text-decoration: none;
        cursor: pointer;
        white-space: nowrap;
    }

    .btn-details {
        background-color: #e7f9fc;
        color: #06BBCC;
        border: 1px solid #06BBCC;
    }

    .btn-edit {
        background-color: #fff7e6;
        color: #ffc107;
        border: 1px solid #ffc107;
    }

    .btn-delete {
        background-color: #fdecea;
        color: #dc3545;
        border: 1px solid #dc3545;
    }

    .btn-reserver {
        background-color: #e8f5e9;
        color: #28a745;
        border: 1px solid #28a745;
    }

    .btn:hover {
        opacity: 0.85;
    }

    .pagination-wrapper {
        display: flex;
        justify-content: center;
        margin-top: 20px;
        margin-bottom: 20px;
    }

    .pagination {
        display: flex;
        gap: 8px;
        list-style: none;
        padding-left: 0;
    }

    .pagination a, .pagination span {
        padding: 8px 12px;
        border: 1px solid #06BBCC;
        border-radius: 4px;
        text-decoration: none;
        color: #06BBCC;
        background-color: white;
    }

    .pagination .current {
        background-color: #06BBCC;
        color: white;
        font-weight: bold;
    }

    .create-button {
        text-align: center;
        margin-top: 20px;
        margin-bottom: 30px;
    }

    .create-btn {
        background-color: #06BBCC;
        color: white;
        padding: 12px 24px;
        font-size: 16px;
        font-weight: bold;
        border-radius: 6px;
        text-decoration: none;
        transition: background-color 0.3s ease;
    }

    .create-btn:hover {
        background-color: #0498a8;
        text-decoration: none;
    }

    .text-center {
        text-align: center;
    }

    a[href*="app_reservation_hebergement_index"]:hover {
        text-decoration: underline;
    }
</style>

{% endblock %}
